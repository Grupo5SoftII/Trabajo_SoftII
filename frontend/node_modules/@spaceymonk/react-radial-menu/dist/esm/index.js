import e from"react";function n(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]])}return t}function t(e){var n,a,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(n=0;n<o;n++)e[n]&&(a=t(e[n]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}function a(){for(var e,n,a=0,r="",o=arguments.length;a<o;a++)(e=arguments[a])&&(n=t(e))&&(r&&(r+=" "),r+=n);return r}"function"==typeof SuppressedError&&SuppressedError;const r=e.createContext(null);function o(...e){return a(...e).split(" ").map(e=>`__rrm-${e}`).join(" ")}function i(e,n,t,a){const r=a*Math.cos(e),o=a*Math.sin(e),i=a*Math.cos(n),c=a*Math.sin(n),l=t*Math.cos(e),s=t*Math.sin(e),_=n-e<=180?0:1;return`\n            M ${a} ${a}\n            m ${l} ${s}\n            l ${r-l} ${o-s}\n            A ${a} ${a} 0 ${_} 1 ${i+a} ${c+a}\n            l ${t*Math.cos(n)-i} ${t*Math.sin(n)-c}\n            A ${t} ${t} 0 ${_} 0 ${a+l} ${a+s}\n          `}function c(e,n,t){const a=.98*t,r=.95*t,o=a*Math.cos((e+n)/2)+t,i=a*Math.sin((e+n)/2)+t;return`${r*Math.cos((e+n)/2+Math.PI/60)+t},${r*Math.sin((e+n)/2+Math.PI/60)+t} ${o},${i} ${r*Math.cos((e+n)/2-Math.PI/60)+t},${r*Math.sin((e+n)/2-Math.PI/60)+t}`}function l(e,n,t,a,r){const o=Math.min(e/Math.sqrt(2),n*t),i=o;return{objectX:Math.cos(n*a+n/2)*t+(r-o/2),objectY:Math.sin(n*a+n/2)*t+(r-i/2),objectWidth:o,objectHeight:i}}!function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(':root {\n  --__reactRadialMenu__menu-bgColor: #fff;\n  --__reactRadialMenu__separator-color: rgba(0, 0, 0, 0.2);\n  --__reactRadialMenu__item-color: #333;\n  --__reactRadialMenu__zIndex: 666;\n  --__reactRadialMenu__activeItem-color: #fff;\n  --__reactRadialMenu__activeItem-bgColor: #3498db;\n  --__reactRadialMenu__arrow-color: #6f6e77;\n  --__reactRadialMenu__activeArrow-color: #fff;\n  --__reactRadialMenu__animation-delay: 300ms;\n}\n/* --------------------------------- Themes --------------------------------- */\n.__rrm-light {\n  --__reactRadialMenu__menu-bgColor: #fff;\n  --__reactRadialMenu__separator-color: rgba(0, 0, 0, 0.2);\n  --__reactRadialMenu__item-color: #333;\n}\n.__rrm-dark {\n  --__reactRadialMenu__menu-bgColor: rgba(40, 40, 40, 0.98);\n  --__reactRadialMenu__separator-color: #4c4c4c;\n  --__reactRadialMenu__item-color: #fff;\n}\n/* ------------------------------- Animations --------------------------------*/\n.__rrm-menu.__rrm-closing.__rrm-fade,\n.__rrm-menu.__rrm-opening.__rrm-fade {\n  opacity: 0;\n}\n.__rrm-menu.__rrm-opened.__rrm-fade {\n  opacity: 1;\n}\n\n.__rrm-menu.__rrm-closing.__rrm-scale,\n.__rrm-menu.__rrm-opening.__rrm-scale {\n  scale: 0;\n}\n.__rrm-menu.__rrm-opened.__rrm-scale {\n  scale: 1;\n}\n\n.__rrm-menu.__rrm-closing.__rrm-rotate,\n.__rrm-menu.__rrm-opening.__rrm-rotate {\n  rotate: -45deg;\n}\n.__rrm-menu.__rrm-opened.__rrm-rotate {\n  rotate: 0deg;\n}\n/* ---------------------------------- Menu ---------------------------------- */\n.__rrm-menu {\n  position: absolute;\n  z-index: var(--__reactRadialMenu__zIndex);\n  transition: all var(--__reactRadialMenu__animation-delay) ease;\n  transform-origin: center;\n  font-family: "Roboto", sans-serif;\n  font-size: 1rem;\n}\n.__rrm-menu g {\n  cursor: pointer;\n}\n/* ---------------------------------- Base ---------------------------------- */\n.__rrm-base {\n  transition: all var(--__reactRadialMenu__animation-delay) ease;\n  fill: var(--__reactRadialMenu__menu-bgColor);\n  stroke: var(--__reactRadialMenu__separator-color);\n}\n.__rrm-base.__rrm-active {\n  fill: var(--__reactRadialMenu__activeItem-bgColor);\n}\n/* --------------------------------- Content -------------------------------- */\n.__rrm-content {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  flex-direction: column;\n  pointer-events: none;\n  color: var(--__reactRadialMenu__item-color);\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n}\n.__rrm-content.__rrm-active {\n  color: var(--__reactRadialMenu__activeItem-color);\n}\n/* ---------------------------------- Arrow --------------------------------- */\n.__rrm-arrow {\n  stroke: var(--__reactRadialMenu__arrow-color);\n  fill: none;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n  stroke-width: 2px;\n}\n.__rrm-arrow.__rrm-active {\n  stroke: var(--__reactRadialMenu__activeArrow-color);\n}\n/* --------------------------------- Return --------------------------------- */\n.__rrm-return {\n  stroke: var(--__reactRadialMenu__arrow-color);\n  fill: none;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n  stroke-width: 4px;\n}\n.__rrm-return.__rrm-active {\n  stroke: var(--__reactRadialMenu__activeArrow-color);\n}\n/* --------------------------------- No Bg --------------------------------- */\n.__rrm-no-bg > g > foreignObject {\n  border: 1px solid var(--__reactRadialMenu__separator-color);\n  border-radius: 50%;\n  background-color: var(--__reactRadialMenu__menu-bgColor);\n}\n.__rrm-no-bg > g > foreignObject:has(.__rrm-active) {\n  background-color: var(--__reactRadialMenu__activeItem-bgColor);\n}\n.__rrm-no-bg .__rrm-arrow {\n  stroke: var(--__reactRadialMenu__arrow-color);\n  fill: none;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n  stroke-width: 2px;\n}\n.__rrm-no-bg .__rrm-arrow.__rrm-active {\n  stroke: var(--__reactRadialMenu__arrow-color);\n}\n');const s={activeMenuId:"0",deltaRadius:0,innerRadius:0,menuHeight:0,menuWidth:0,middleRadius:0,outerRadius:0,drawBackground:!0},_=t=>{var{centerX:i,centerY:c,innerRadius:l,outerRadius:_,animationTimeout:u,show:d,animateSubMenuChange:m,animation:h,theme:M,drawBackground:p}=t,g=n(t,["centerX","centerY","innerRadius","outerRadius","animationTimeout","show","animateSubMenuChange","animation","theme","drawBackground"]);const[v,f]=e.useState(s);if(l>=_)throw new Error("RadialMenu's innerRadius must be less than outerRadius");const b=e.Children.count(g.children);if(b<2)throw new Error("RadialMenu must have at least 2 children");const E=2*Math.PI/b,R=(l+_)/2,w=_-l,y=2*_,I=y;u=e.useMemo(()=>u||0,[u]);e.useEffect(()=>{f(e=>({innerRadius:l,outerRadius:_,middleRadius:R,deltaRadius:w,menuWidth:y,menuHeight:I,activeMenuId:d?"0":e.activeMenuId,drawBackground:null==p||p}))},[l,_,d,p]);const[j,k]=e.useState("closed"),C=e.useCallback(()=>{document.documentElement.style.setProperty("--__reactRadialMenu__animation-delay",`${u}ms`),d?(k("opening"),setTimeout(()=>k("opened"),u)):(k("closing"),setTimeout(()=>k("closed"),u))},[d,u]),x=e.useCallback(e=>{m?(C(),setTimeout(()=>f(n=>Object.assign(Object.assign({},n),{activeMenuId:e})),u)):f(n=>Object.assign(Object.assign({},n),{activeMenuId:e}))},[C,m]);return e.useEffect(()=>{C()},[d,C]),"closed"===j?e.createElement(e.Fragment,null):e.createElement(r.Provider,{value:{data:v,changeMenu:x}},e.createElement("svg",Object.assign({},g,{width:y,height:I,viewBox:`-3 -3 ${y+6} ${I+6}`,style:Object.assign(Object.assign({},g.style),{width:`${y}px`,height:`${I}px`,left:i-_+"px",top:c-_+"px"}),className:a(g.className,o("menu",j,h,M,!v.drawBackground&&"no-bg"))}),e.Children.map(g.children,(n,t)=>{if(e.isValidElement(n)){let a={__index:t,__angleStep:E,__parentMenuId:"0"};return e.cloneElement(n,a)}return n})))},u=t=>{var{__angleStep:a,__index:c,__parentMenuId:s,data:_,onItemClick:u}=t,d=n(t,["__angleStep","__index","__parentMenuId","data","onItemClick"]);const{data:m}=e.useContext(r),{innerRadius:h,outerRadius:M,middleRadius:p,deltaRadius:g,activeMenuId:v}=m,[f,b]=e.useState(!1),E=a,R=c,w=s,{objectX:y,objectY:I,objectWidth:j,objectHeight:k}=e.useMemo(()=>l(g,E,p,R,M),[g,E,p,R,M]);return w!==v?e.createElement(e.Fragment,null):m.drawBackground?e.createElement("g",Object.assign({},d,{onMouseEnter:e=>{var n;null===(n=d.onMouseEnter)||void 0===n||n.call(d,e),b(!0)},onMouseLeave:e=>{var n;null===(n=d.onMouseLeave)||void 0===n||n.call(d,e),b(!1)},onClick:e=>{e.preventDefault(),e.stopPropagation(),null==u||u(e,R,_)}}),e.createElement("path",{d:i(R*E,(R+1)*E,h,M),className:o("base",{active:f})}),e.createElement("foreignObject",{x:y,y:I,width:j,height:k},e.createElement("div",{className:o("content",{active:f})},d.children))):e.createElement("g",Object.assign({},d),e.createElement("foreignObject",{x:y,y:I,width:j,height:k,onMouseEnter:e=>{var n;null===(n=d.onMouseEnter)||void 0===n||n.call(d,e),b(!0)},onMouseLeave:e=>{var n;null===(n=d.onMouseLeave)||void 0===n||n.call(d,e),b(!1)},onClick:e=>{e.preventDefault(),e.stopPropagation(),null==u||u(e,R,_)}},e.createElement("div",{className:o("content",{active:f})},d.children)))},d=t=>{var{__myMenuId:a,__angleStep:s,__index:_,itemView:u,data:d,onItemClick:m}=t,h=n(t,["__myMenuId","__angleStep","__index","itemView","data","onItemClick"]);const{data:M,changeMenu:p}=e.useContext(r),{innerRadius:g,outerRadius:v,middleRadius:f,deltaRadius:b}=M,[E,R]=e.useState(!1),w=s,y=_,I=a,{objectX:j,objectY:k,objectWidth:C,objectHeight:x}=e.useMemo(()=>l(b,w,f,y,v),[b,w,f,y,v]);return M.drawBackground?e.createElement("g",Object.assign({},h,{onMouseEnter:e=>{var n;null===(n=h.onMouseEnter)||void 0===n||n.call(h,e),R(!0)},onMouseLeave:e=>{var n;null===(n=h.onMouseLeave)||void 0===n||n.call(h,e),R(!1)},onClick:e=>{e.preventDefault(),e.stopPropagation(),null==m||m(e,y,d),p(I)}}),e.createElement("path",{d:i(y*w,(y+1)*w,g,v),className:o("base",{active:E})}),e.createElement("foreignObject",{x:j,y:k,width:C,height:x},e.createElement("div",{className:o("content",{active:E})},u)),e.createElement("polyline",{points:c(y*w,(y+1)*w,v),className:o("arrow",{active:E})})):e.createElement("g",Object.assign({},h),e.createElement("foreignObject",{onMouseEnter:e=>{var n;null===(n=h.onMouseEnter)||void 0===n||n.call(h,e),R(!0)},onMouseLeave:e=>{var n;null===(n=h.onMouseLeave)||void 0===n||n.call(h,e),R(!1)},onClick:e=>{e.preventDefault(),e.stopPropagation(),null==m||m(e,y,d),p(I)},x:j,y:k,width:C,height:x},e.createElement("div",{className:o("content",{active:E})},u)),e.createElement("polyline",{points:c(y*w,(y+1)*w,v),className:o("arrow",{active:E})}))},m=t=>{var{position:a,onClick:i}=t,c=n(t,["position","onClick"]);const{data:l}=e.useContext(r),{innerRadius:s,outerRadius:_,activeMenuId:u}=l,[d,m]=e.useState(!1);let{startAngle:h,endAngle:M,objectX:p,objectY:g,objectWidth:v,objectHeight:f}=e.useMemo(()=>function(e,n,t){let a=0,r=0,o=0,i=0,c=0,l=0;switch(e){case"top":a=Math.PI/6+Math.PI,r=5*Math.PI/6+Math.PI,o=n/2,l=Math.sin(a)*n+t-o,c=Math.cos(a)*n+t,i=Math.cos(r)*n+t-c;break;case"bottom":a=Math.PI/6,r=5*Math.PI/6,o=n/2,l=Math.sin(r)*n+t,c=Math.cos(r)*n+t,i=Math.cos(a)*n+t-c;break;case"left":a=4*Math.PI/6,r=8*Math.PI/6,i=n/2,c=Math.cos(r)*n+t-i,l=Math.sin(r)*n+t,o=Math.sin(a)*n+t-l;break;case"right":a=10*Math.PI/6,r=2*Math.PI/6,i=n/2,c=Math.cos(a)*n+t,l=Math.sin(a)*n+t,o=Math.sin(r)*n+t-l;break;case"center":c=t-n,l=c,i=2*n,o=i;break;default:throw new Error(`Invalid position: ${e}`)}return{startAngle:a,endAngle:r,objectX:c,objectY:l,objectWidth:i,objectHeight:o}}(a,s,_),[a,s,_]);return c.__parentMenuId!==u?e.createElement(e.Fragment,null):l.drawBackground?e.createElement("g",Object.assign({},c,{onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onClick:e=>{e.preventDefault(),e.stopPropagation(),i(e,a)}}),"center"!==a?e.createElement("path",{d:`M ${Math.cos(h)*s+_}\n                ${Math.sin(h)*s+_}\n              A ${s} ${s} 0 0 1 \n                ${Math.cos(M)*s+_}\n                ${Math.sin(M)*s+_}\n              Z`,className:o("base",{active:d})}):e.createElement("circle",{cx:_,cy:_,r:s,className:o("base",{active:d})}),e.createElement("foreignObject",{x:p,y:g,width:v,height:f},e.createElement("div",{className:o("content",{active:d})},c.children?c.children:e.createElement("svg",{className:o("return",{active:d}),width:.5*v+"px",height:.5*f+"px",viewBox:"0 0 48 48"},e.createElement("path",{d:"M12.9998 8L6 14L12.9998 21"}),e.createElement("path",{d:"M6 14H28.9938C35.8768 14 41.7221 19.6204 41.9904 26.5C42.2739 33.7696 36.2671 40 28.9938 40H11.9984"}))))):e.createElement("g",Object.assign({},c),e.createElement("foreignObject",{x:p,y:g,width:v,height:f,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onClick:e=>{e.preventDefault(),e.stopPropagation(),i(e,a)}},e.createElement("div",{className:o("content",{active:d})},c.children?c.children:e.createElement("svg",{className:o("return",{active:d}),width:.5*v+"px",height:.5*f+"px",viewBox:"0 0 48 48"},e.createElement("path",{d:"M12.9998 8L6 14L12.9998 21"}),e.createElement("path",{d:"M6 14H28.9938C35.8768 14 41.7221 19.6204 41.9904 26.5C42.2739 33.7696 36.2671 40 28.9938 40H11.9984"})))))},h=({__myMenuId:n,__parentMenuId:t,displayPosition:a,children:o,displayView:i,onDisplayClick:c})=>{const{changeMenu:l}=e.useContext(r),s=n,_=t,u=e.Children.count(o);if(u<2)throw new Error("RadialMenu must have at least 2 children");const d=2*Math.PI/u;return e.createElement(e.Fragment,null,e.Children.map(o,(n,t)=>{if(e.isValidElement(n)){let a={__index:t,__angleStep:d,__parentMenuId:s};return e.cloneElement(n,a)}return n}),e.createElement(m,{__parentMenuId:s,position:a,onClick:(e,n)=>{null==c||c(e,n),l(_)}},i))},M=t=>{const{data:a}=e.useContext(r),{activeMenuId:o}=a,i=`${t.__parentMenuId}-${t.__index}`,{__parentMenuId:c,displayPosition:l,children:s,displayView:_,onDisplayClick:u}=t,m=n(t,["__parentMenuId","displayPosition","children","displayView","onDisplayClick"]);return o===t.__parentMenuId?e.createElement(d,Object.assign({},m,{__myMenuId:i})):e.createElement(h,{__myMenuId:i,__parentMenuId:c,displayPosition:l,children:s,displayView:_,onDisplayClick:u})};export{_ as Menu,u as MenuItem,M as SubMenu};
